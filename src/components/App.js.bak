import React, { Component } from 'react';
import '../style/App.css';

class App extends Component {
	constructor(props) {
		super(props);
		this.state = {
			names: ['drew', 'kate', 'dan', 'greg', 'mom', 'dad'],
			inputs: [],
		};
		this.handleInputChange = this.handleInputChange.bind(this);
		this.handleAddInput = this.handleAddInput.bind(this);
	}
	
	handleInputChange(inputText,id) {
		let match;
		if (this.state.names.includes(inputText.target.value)) {
			match = true;
		} else {
			match = false;
		}
		let inputs = this.state.inputs;
		inputs[id].inputText = inputText.target.value;
		inputs[id].match = match;
		this.setState({
			inputs: inputs,
		});
	}
	
	handleAddInput(event) {
		const l = this.state.inputs.length;
		const inputs = [
			...this.state.inputs,
			{
				id: l,
				inputText: '',
				match: false,
			}
		];
		this.setState({
			inputs: inputs,
		});
	}
	
	render() {
		const inputs = this.state.inputs;
		const inputList = inputs.map((inputItem, i) => {
			return (
			  <input id={i} key={i} className={'myInput'} type={'text'} value={inputItem.inputText} placeholder={'Type Here...'} onChange={(e) => this.handleInputChange(e,i)} style={{ background: (inputItem.match ? 'red' : 'white') }} />
			);
		});
		return (
		<div className="myApp">
			{inputList}
			<input type={'button'} value={'Add Input'} onClick={(e) => this.handleAddInput(e)} />
		</div>
		);
	}
}

export default App;
